<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Autoexamen</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 20px;
		}

		.question {
			display: none;
		}

		.question.active {
			display: block;
		}

		button {
			margin-top: 10px;
			padding: 10px 20px;
			font-size: 16px;
		}

		#resultado {
			margin-top: 20px;
		}

		.incorrect {
			color: red;
		}

		.correct {
			color: green;
		}
	</style>
</head>

<body>
	<h1>Autoexamen</h1>
	<div id="formulario">
		<div class="question active" data-correct="A">
			<p>1. ¿Cuál es la capital de Francia?</p>
			<label><input type="radio" name="q1" value="A"> París</label><br>
			<label><input type="radio" name="q1" value="B"> Roma</label><br>
			<label><input type="radio" name="q1" value="C"> Berlín</label><br>
		</div>
		<div class="question" data-correct="C">
			<p>2. ¿Cuál es el resultado de 5 x 5?</p>
			<label><input type="radio" name="q2" value="A"> 20</label><br>
			<label><input type="radio" name="q2" value="B"> 10</label><br>
			<label><input type="radio" name="q2" value="C"> 25</label><br>
		</div>
		<div class="question" data-correct="B">
			<p>3. ¿Quién escribió *Cien años de soledad*?</p>
			<label><input type="radio" name="q3" value="A"> Pablo Neruda</label><br>
			<label><input type="radio" name="q3" value="B"> Gabriel García Márquez</label><br>
			<label><input type="radio" name="q3" value="C"> Isabel Allende</label><br>
		</div>
		<div class="question" data-correct="A">
			<p>4. ¿En qué continente se encuentra Egipto?</p>
			<label><input type="radio" name="q4" value="A"> África</label><br>
			<label><input type="radio" name="q4" value="B"> Asia</label><br>
			<label><input type="radio" name="q4" value="C"> Europa</label><br>
		</div>
		<div class="question" data-correct="C">
			<p>5. ¿Cuántos planetas hay en el sistema solar?</p>
			<label><input type="radio" name="q5" value="A"> 7</label><br>
			<label><input type="radio" name="q5" value="B"> 8</label><br>
			<label><input type="radio" name="q5" value="C"> 9</label><br>
		</div>
	</div>
	<button id="next">Siguiente</button>
	<button id="submit" style="display: none;">Finalizar</button>
	<div id="resultado" style="display: none;">
		<h2>Resultados</h2>
		<p id="feedback"></p>
		<div id="detalles"></div>
	</div>

	<script>
		// Seleccionamos todos los elementos con la clase "question" (cada pregunta del examen)
		const questions = document.querySelectorAll('.question');
		// Variable para rastrear qué pregunta está actualmente activa
		let currentQuestion = 0;
		// Variable para almacenar la puntuación del usuario
		let score = 0;

		// Seleccionamos los botones y elementos de resultados
		const nextButton = document.getElementById('next'); // Botón "Siguiente"
		const submitButton = document.getElementById('submit'); // Botón "Finalizar"
		const resultadoDiv = document.getElementById('resultado'); // Contenedor donde se muestran los resultados
		const feedback = document.getElementById('feedback'); // Texto que muestra el puntaje
		const detalles = document.getElementById('detalles'); // Contenedor para mostrar detalles de respuestas correctas/incorrectas

		// Agregamos un evento al botón "Siguiente" para manejar el paso entre preguntas
		nextButton.addEventListener('click', () => {
			// Obtenemos la pregunta activa actual
			const current = questions[currentQuestion];
			// Buscamos qué opción ha seleccionado el usuario
			const selected = current.querySelector('input[type="radio"]:checked');

			// Si no ha seleccionado ninguna respuesta, mostramos una alerta
			if (!selected) {
				alert('Por favor, selecciona una respuesta.');
				return;
			}

			// Verificamos si la respuesta seleccionada es correcta
			if (selected.value === current.getAttribute('data-correct')) {
				score++; // Si es correcta, incrementamos el puntaje
			}

			// Ocultamos la pregunta actual
			current.classList.remove('active');
			// Pasamos a la siguiente pregunta
			currentQuestion++;

			// Si aún hay preguntas restantes, mostramos la siguiente
			if (currentQuestion < questions.length) {
				questions[currentQuestion].classList.add('active');
			} else {
				// Si no hay más preguntas, ocultamos el botón "Siguiente"
				nextButton.style.display = 'none';
				// Mostramos el botón "Finalizar"
				submitButton.style.display = 'inline-block';
			}
		});

		// Agregamos un evento al botón "Finalizar" para manejar los resultados
		submitButton.addEventListener('click', () => {
			// Mostramos el puntaje total del usuario
			let resultHTML = `Obtuviste ${score} de ${questions.length} respuestas correctas.`;
			feedback.textContent = resultHTML;
			// Mostramos el contenedor de resultados
			resultadoDiv.style.display = 'block';
			// Ocultamos el botón "Finalizar"
			submitButton.style.display = 'none';

			// Mostrar detalles de respuestas
			// Limpieza de detalles anteriores y generación de un resumen
			detalles.innerHTML = '';
			questions.forEach((question, index) => {
				// Obtenemos la respuesta seleccionada por el usuario
				const selected = question.querySelector('input[type="radio"]:checked');
				// Obtenemos la respuesta correcta de la pregunta
				const correctAnswer = question.getAttribute('data-correct');
				// Obtenemos el texto de la pregunta
				const questionText = question.querySelector('p').textContent;
				// Obtenemos el texto de la respuesta correcta
				const correctLabel = question.querySelector(`input[value="${correctAnswer}"]`).parentElement;

				// Si el usuario seleccionó alguna respuesta
				if (selected) {
					const selectedLabel = question.querySelector(`input[value="${selected.value}"]`).parentElement;

					// Si la respuesta es correcta, mostramos en verde
					if (selected.value === correctAnswer) {
						detalles.innerHTML += `<p class="correct">Pregunta ${index + 1}: ${questionText}<br>Respuesta correcta: ${correctLabel.textContent}</p>`;
					} else {
						// Si es incorrecta, mostramos en rojo la respuesta incorrecta y la correcta
						detalles.innerHTML += `<p class="incorrect">Pregunta ${index + 1}: ${questionText}<br>Tu respuesta: ${selectedLabel.textContent}<br>Respuesta correcta: ${correctLabel.textContent}</p>`;
					}
				}
			});
		});
	</script>
</body>
</html>
