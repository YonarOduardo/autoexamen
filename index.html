<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Autoexamen de Epilepsia</title>
	<style>
		/* Estilos generales */
		body {
			font-family: Arial, sans-serif;
			line-height: 1.6;
			margin: 0;
			padding: 0;
			background-color: #f4f4f9;
			color: #333;
			transition: background-color 0.3s, color 0.3s;
		}

		.container {
			max-width: 800px;
			margin: 20px auto;
			background: #fff;
			padding: 20px;
			border-radius: 8px;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
			display: none;
		}

		.container.active {
			display: block;
		}

		.presentation {
			text-align: center;
			margin-top: 20%;
		}

		.presentation button {
			background-color: #007bff;
			color: #fff;
			padding: 10px 20px;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			font-size: 1.2em;
			transition: background-color 0.3s;
		}

		.presentation button:hover {
			background-color: #0056b3;
		}

		h1 {
			text-align: center;
			/* color: #444; */
		}

		.question {
			margin-bottom: 20px;
			display: none;
		}

		.question.active {
			display: block;
		}

		.options {
			margin-left: 20px;
			/* display: flex; */
			/* align-items: center; */
		}

		.options button {
			margin-right: 5px;
			padding: 5px 10px;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			transition: background-color 0.3s;
		}

		.options .true {
			background-color: #d4edda;
			color: #155724;
		}

		.options .false {
			background-color: #f8d7da;
			color: #721c24;
		}

		.response {
			display: inline-flex;
			justify-content: center;
			align-items: center;
			width: 30px;
			height: 30px;
			line-height: 30px;
			text-align: center;
			border-radius: 50%;
			font-weight: bold;
			color: #fff;
			transition: background-color 0.3s;
		}

		.response.true {
			background-color: #28a745;
		}

		.response.false {
			background-color: #dc3545;
		}

		.dark-mode {
			background-color: #333;
			color: #f4f4f9;
		}

		.dark-mode .container {
			background: #444;
			color: #f4f4f9;
		}

		.dark-mode button {
			background-color: #555;
			color: #fff;
		}

		.dark-mode .toggle-theme {
			background-color: transparent;
		}

		.toggle-theme {
			position: fixed;
			top: 10px;
			right: 10px;
			background: none;
			border: none;
			font-size: 1.5em;
			cursor: pointer;
		}

		.credits {
			display: none;
			text-align: center;
		}

		.credits.active {
			display: block;
		}


	</style>
</head>

<body>
	<button class="toggle-theme" onclick="toggleTheme()">🌙</button>

	<!-- Pantalla de presentación -->
	<div class="presentation">
		<h1>Autoexamen de Epilepsia</h1>
		<button onclick="showQuiz()">Continuar 👉</button>
	</div>

	<!-- Contenedor de preguntas -->
	<div class="container" id="quiz-container">
		<h1>Autoexamen de Epilepsia</h1>
		<form id="quiz">
			<!-- Pregunta 1 -->
			<div class="question active" id="question-1">
				<p>La epilepsia es una enfermedad neurológica crónica que afecta a la población a nivel mundial, con una
					incidencia en los niños entre 1 mes y 16 años de edad de 41x 100000 habitantes. Marque verdadero (V)
					o falso (F) según corresponda.</p>

				<!-- Inciso a -->
				<div class="options" id="q1a">
					<p>a) <button class="true" onclick="setAnswer('q1a', 'V', event)">V</button><button class="false"
							onclick="setAnswer('q1a', 'F', event)">F</button><span class="response"
							style="display:none;" id="response-q1a"></span> La crisis epiléptica es una manifestación
						clínica que resulta de
						una descarga excesiva y anormal de las neuronas cerebrales.</p>
				</div>

				<!-- Inciso b -->
				<div class="options" id="q1b">
					<p>b) <button class="true" onclick="setAnswer('q1b', 'V', event)">V</button><button class="false"
							onclick="setAnswer('q1b', 'F', event)">F</button><span class="response"
							style="display:none;" id="response-q1b"></span> Las manifestaciones clínicas consisten en
						fenómenos anormales ,
						transitorios y súbitos.</p>
				</div>

				<!-- Inciso c -->
				<div class="options" id="q1c">
					<p>c) <button class="true" onclick="setAnswer('q1c', 'V', event)">V</button><button class="false"
							onclick="setAnswer('q1c', 'F', event)">F</button><span class="response"
							style="display:none;" id="response-q1c"></span> El paciente presenta alteraciones de la
						conciencia, eventos
						motores, autonómicos o psíquicos.</p>
				</div>

				<!-- Inciso d -->
				<div class="options" id="q1d">
					<p>d) <button class="true" onclick="setAnswer('q1d', 'V', event)">V</button><button class="false"
							onclick="setAnswer('q1d', 'F', event)">F</button><span class="response"
							style="display:none;" id="response-q1d"></span> El diagnóstico es clínico.</p>
				</div>

				<!-- Inciso e -->
				<div class="options" id="q1e">
					<p>e) <button class="true" onclick="setAnswer('q1e', 'V', event)">V</button><button class="false"
							onclick="setAnswer('q1e', 'F', event)">F</button><span class="response"
							style="display:none;" id="response-q1e"></span> El diagnóstico tiene implicaciones
						terapéuticas.</p>
				</div>

				<!-- Inciso f -->
				<div class="options" id="q1f">
					<p>f) <button class="true" onclick="setAnswer('q1f', 'V', event)">V</button><button class="false"
							onclick="setAnswer('q1f', 'F', event)">F</button><span class="response"
							style="display:none;" id="response-q1f"></span> El diagnóstico no tiene implicaciones
						pronósticas.</p>
				</div>

				<!-- Inciso g -->
				<div class="options" id="q1g">
					<p>g) <button class="true" onclick="setAnswer('q1g', 'V', event)">V</button><button class="false"
							onclick="setAnswer('q1g', 'F', event)">F</button><span class="response"
							style="display:none;" id="response-q1g"></span> Las manifestaciones clínicas pueden ser
						percibidas por el paciente
						o por un observador.</p>
				</div>

				<button type="button" onclick="nextQuestion(1)">Siguiente</button>
				<button type="button" onclick="evaluarPregunta1()">Evaluar Pregunta</button>
			</div>

			<!-- Pregunta 2 -->
			<div class="question" id="question-2">
				<p>2. Marque los tipos de crisis epilépticas generalizadas:</p>
				<div class="options" id="q2a">
					<p>a) <label><input type="checkbox" name="q2" value="q2a"> Ausencias, típicas y atípicas</label></p>
				</div>
				<div class="options" id="q2b">
					<p>b) <label><input type="checkbox" name="q2" value="q2b"> Tónico clónicas generalizadas</label></p>
				</div>
				<div class="options" id="q2c">
					<p>c) <label><input type="checkbox" name="q2" value="q2c"> Tónicas</label></p>
				</div>
				<div class="options" id="q2d">
					<p>d) <label><input type="checkbox" name="q2" value="q2d"> Distónicas</label></p>
				</div>
				<div class="options" id="q2e">
					<p>e) <label><input type="checkbox" name="q2" value="q2e"> Atónicas</label></p>
				</div>
				<div class="options" id="q2f">
					<p>f) <label><input type="checkbox" name="q2" value="q2f"> Espasmos epilépticos</label></p>
				</div>
				<div class="options" id="q2g">
					<p>g) <label><input type="checkbox" name="q2" value="q2g"> Clónicas</label></p>
				</div>
				<button type="button" onclick="nextQuestion(2)">Siguiente</button>
				<button type="button" onclick="evaluarPregunta2()">Evaluar Pregunta</button>
			</div>


			<!-- Pregunta 3 -->
			<div class="question" id="question-3">
				<p>3. Factores que definen un síndrome epiléptico:</p>
				<div class="options" id="q3a">
					<p>a) <label><input type="checkbox" name="q3" value="q3a"> Tipo de crisis</label></p>
				</div>
				<div class="options" id="q3b">
					<p>b) <label><input type="checkbox" name="q3" value="q3b"> Edad de inicio de las crisis</label></p>
				</div>
				<div class="options" id="q3c">
					<p>c) <label><input type="checkbox" name="q3" value="q3c"> Duración</label></p>
				</div>
				<div class="options" id="q3d">
					<p>d) <label><input type="checkbox" name="q3" value="q3d"> Antecedentes patológicos familiares y
							personales</label></p>
				</div>
				<div class="options" id="q3e">
					<p>e) <label><input type="checkbox" name="q3" value="q3e"> Electroencefalograma ictal e interictal</label></p>
				</div>
				<div class="options" id="q3f">
					<p>f) <label><input type="checkbox" name="q3" value="q3f"> Examen físico</label></p>
				</div>
				<div class="options" id="q3g">
					<p>g) <label><input type="checkbox" name="q3" value="q3g"> Estudios de neuroimagen</label></p>
				</div>
				<button type="button" onclick="nextQuestion(3)">Siguiente</button>
				<button type="button" onclick="evaluarPregunta3()">Evaluar Pregunta</button>
			</div>

			<!-- Pregunta 4 -->
			<div class="question" id="question-4">
				<p>4. Diagnóstico clínico:</p>
				<div class="options" id="q4a">
					<p>a) <label><input type="checkbox" name="q4" value="q4a"> Tipo de crisis, duración, circunstancias,
							frecuencia</label></p>
				</div>
				<div class="options" id="q4b">
					<p>b) <label><input type="checkbox" name="q4" value="q4b"> Exámenes complementarios</label></p>
				</div>
				<div class="options" id="q4c">
					<p>c) <label><input type="checkbox" name="q4" value="q4c"> Antecedentes prenatales, perinatales y
							posnatales</label></p>
				</div>
				<div class="options" id="q4d">
					<p>d) <label><input type="checkbox" name="q4" value="q4d"> Antecedentes del neurodesarrollo</label></p>
				</div>
				<div class="options" id="q4e">
					<p>e) <label><input type="checkbox" name="q4" value="q4e"> Condiciones económicas y sociales</label></p>
				</div>
				<div class="options" id="q4f">
					<p>f) <label><input type="checkbox" name="q4" value="q4f"> Condiciones culturales</label></p>
				</div>
				<div class="options" id="q4g">
					<p>g) <label><input type="checkbox" name="q4" value="q4g"> Examen físico general y neurológico</label></p>
				</div>
				<button type="button" onclick="nextQuestion(4)">Siguiente</button>
				<button type="button" onclick="evaluarPregunta4()">Evaluar Pregunta</button>
			</div>

<!-- Pregunta 5 -->
<div class="question" id="question-5">
	<p>5. Marque las condiciones que pueden confundirse con epilepsia:</p>
	<div class="options" id="q5a">
		<p>a) <label><input type="checkbox" name="q5" value="q5a"> Espasmos del sollozo</label></p>
	</div>
	<div class="options" id="q5b">
		<p>b) <label><input type="checkbox" name="q5" value="q5b"> Síncopes</label></p>
	</div>
	<div class="options" id="q5c">
		<p>c) <label><input type="checkbox" name="q5" value="q5c"> Terror nocturno</label></p>
	</div>
	<div class="options" id="q5d">
		<p>d) <label><input type="checkbox" name="q5" value="q5d"> Estrés postraumático</label></p>
	</div>
	<div class="options" id="q5e">
		<p>e) <label><input type="checkbox" name="q5" value="q5e"> Vértigo paroxístico benigno</label></p>
	</div>
	<div class="options" id="q5f">
		<p>f) <label><input type="checkbox" name="q5" value="q5f"> Temblores del neonato</label></p>
	</div>
	<div class="options" id="q5g">
		<p>g) <label><input type="checkbox" name="q5" value="q5g"> Crisis imitadoras</label></p>
	</div>
	<button type="button" onclick="evaluarPregunta5()">Evaluar Pregunta</button>
	<button type="button" onclick="calcularPuntuacionFinal()">Puntuación Final</button>
</div>



			<div id="result"></div>
		</form>
	</div>
	<div class="container" id="final-score">
		<div class="dynamic-content"></div>
		<button type="button" onclick="showCredits()">Ver créditos</button>
	</div>


	<!-- Contenedor de créditos -->
	<div class="credits" id="credits-container">
		<h1>Dedicado a los estudiantes</h1>
	</div>

<script>
	// Modo claro/oscuro
	function toggleTheme() {
		const body = document.body;
		const themeButton = document.querySelector('.toggle-theme');
		body.classList.toggle('dark-mode');
		themeButton.textContent = body.classList.contains('dark-mode') ? '🔆' : '🌙';
	}

	// Mostrar preguntas
	function showQuiz() {
		document.querySelector('.presentation').style.display = 'none';
		document.getElementById('quiz-container').classList.add('active');
	}

	function nextQuestion(current) {
		const currentQuestion = document.querySelector(`#question-${current}`);
		const nextQuestion = document.querySelector(`#question-${current + 1}`);

		if (nextQuestion) {
			currentQuestion.classList.remove('active');
			nextQuestion.classList.add('active');
		}

		// Vaciar el elemento de resultados
		document.getElementById('result').innerHTML = '';
	}

	// Mostrar créditos
	function showCredits() {
			document.getElementById('final-score').classList.remove('active');
			document.getElementById('credits-container').classList.add('active');
		}


	// Manejar respuestas
	function setAnswer(id, value, event) {
		event.preventDefault();

		const response = document.getElementById(`response-${id}`);
		response.textContent = value;
		response.className = `response ${value === 'V' ? 'true' : 'false'}`;
		response.style.display = 'inline-flex';

		const buttons = document.querySelectorAll(`#${id} button`);
		buttons.forEach(button => button.style.display = 'none');

		response.onclick = () => {
			buttons.forEach(button => button.style.display = 'inline-block');
			response.textContent = '';
			response.className = 'response';
			response.style.display = 'none';
		};
	}

	// Evaluar pregunta 1
	function evaluarPregunta1() {
		const correctas = {
			q1a: 'V',
			q1b: 'V',
			q1c: 'V',
			q1d: 'V',
			q1e: 'V',
			q1f: 'F',
			q1g: 'V'
		};
		let puntaje = 5;
		const errores = [];

		for (const [key, valorCorrecto] of Object.entries(correctas)) {
			const response = document.getElementById(`response-${key}`);
			if (response.textContent !== valorCorrecto) {
				puntaje--;
				errores.push(`${key.toUpperCase()}: La respuesta correcta era ${valorCorrecto}`);
			}
		}

		// Asegurar que el puntaje mínimo sea 2
		if (puntaje < 2) {
			puntaje = 2;
		}

		const resultado = document.getElementById("result");
		resultado.innerHTML = `<p>Puntaje de la Pregunta 1: ${puntaje} puntos</p>`;
		if (errores.length > 0) {
			resultado.innerHTML += `<p>Errores:</p><ul>${errores.map(e => `<li>${e}</li>`).join('')}</ul>`;
		}
	}

	// Evaluar pregunta 2
	function evaluarPregunta2() {
		const correctas = {
			q2a: true,
			q2b: true,
			q2c: true,
			q2d: false,  // Este es incorrecto
			q2e: true,
			q2f: true,
			q2g: true
		};
		let puntaje = 5;
		const errores = [];

		for (const [key, valorCorrecto] of Object.entries(correctas)) {
			const checkbox = document.querySelector(`input[name="q2"][value="${key}"]`);
			const isChecked = checkbox.checked;
			if (isChecked !== valorCorrecto) {
				puntaje--;
				errores.push(`${key.toUpperCase()}: La respuesta correcta era ${valorCorrecto ? 'Marcado' : 'No Marcado'}`);
			}
		}

		// Asegurar que el puntaje mínimo sea 2
		if (puntaje < 2) {
			puntaje = 2;
		}

		const resultado = document.getElementById("result");
		resultado.innerHTML = `<p>Puntaje de la Pregunta 2: ${puntaje} puntos</p>`;
		if (errores.length > 0) {
			resultado.innerHTML += `<p>Errores:</p><ul>${errores.map(e => `<li>${e}</li>`).join('')}</ul>`;
		}
	}
	function evaluarPregunta3() {
			const correctas = {
				q3a: true,
				q3b: true,
				q3c: false,
				q3d: true,
				q3e: true,
				q3f: true,
				q3g: true
			};
			let puntaje = 5;
			const errores = [];

			for (const [key, valorCorrecto] of Object.entries(correctas)) {
				const checkbox = document.querySelector(`input[name="q3"][value="${key}"]`);
				const isChecked = checkbox.checked;
				if (isChecked !== valorCorrecto) {
					puntaje--;
					errores.push(`${key.toUpperCase()}: La respuesta correcta era ${valorCorrecto ? 'Marcado' : 'No Marcado'}`);
				}
			}

			// Asegurar que el puntaje mínimo sea 2
			if (puntaje < 2) {
				puntaje = 2;
			}

			const resultado = document.getElementById("result");
			resultado.innerHTML = `<p>Puntaje de la Pregunta 3: ${puntaje} puntos</p>`;
			if (errores.length > 0) {
				resultado.innerHTML += `<p>Errores:</p><ul>${errores.map(e => `<li>${e}</li>`).join('')}</ul>`;
			}
		}
		function evaluarPregunta4() {
				const correctas = {
					q4a: true,
					q4b: false,
					q4c: true,
					q4d: true,
					q4e: true,
					q4f: true,
					q4g: true
				};
				let puntaje = 5;
				const errores = [];

				for (const [key, valorCorrecto] of Object.entries(correctas)) {
					const checkbox = document.querySelector(`input[name="q4"][value="${key}"]`);
					const isChecked = checkbox.checked;
					if (isChecked !== valorCorrecto) {
						puntaje--;
						errores.push(`${key.toUpperCase()}: La respuesta correcta era ${valorCorrecto ? 'Marcado' : 'No Marcado'}`);
					}
				}

				// Asegurar que el puntaje mínimo sea 2
				if (puntaje < 2) {
					puntaje = 2;
				}

				const resultado = document.getElementById("result");
				resultado.innerHTML = `<p>Puntaje de la Pregunta 4: ${puntaje} puntos</p>`;
				if (errores.length > 0) {
					resultado.innerHTML += `<p>Errores:</p><ul>${errores.map(e => `<li>${e}</li>`).join('')}</ul>`;
				}
			}
			function evaluarPregunta5() {
					const correctas = {
						q5a: true,
						q5b: true,
						q5c: true,
						q5d: false,
						q5e: true,
						q5f: true,
						q5g: true
					};
					let puntaje = 5;
					const errores = [];

					for (const [key, valorCorrecto] of Object.entries(correctas)) {
						const checkbox = document.querySelector(`input[name="q5"][value="${key}"]`);
						const isChecked = checkbox.checked;
						if (isChecked !== valorCorrecto) {
							puntaje--;
							errores.push(`${key.toUpperCase()}: La respuesta correcta era ${valorCorrecto ? 'Marcado' : 'No Marcado'}`);
						}
					}

					// Asegurar que el puntaje mínimo sea 2
					if (puntaje < 2) {
						puntaje = 2;
					}

					const resultado = document.getElementById("result");
					resultado.innerHTML = `<p>Puntaje de la Pregunta 5: ${puntaje} puntos</p>`;
					if (errores.length > 0) {
						resultado.innerHTML += `<p>Errores:</p><ul>${errores.map(e => `<li>${e}</li>`).join('')}</ul>`;
					}
				}

				function calcularPuntuacionFinal() {
						document.getElementById('quiz-container').classList.remove('active');
						document.getElementById('final-score').classList.add('active');
						const puntuaciones = [];
						let totalErrores = "";

						// Evaluar cada pregunta y acumular los detalles
						evaluarPregunta1();
						const puntaje1 = obtenerPuntajeDePregunta(1);
						puntuaciones.push(puntaje1);
						totalErrores += `<p>Pregunta 1: ${puntaje1} puntos</p>${obtenerErroresDePregunta(1)}`;

						evaluarPregunta2();
						const puntaje2 = obtenerPuntajeDePregunta(2);
						puntuaciones.push(puntaje2);
						totalErrores += `<p>Pregunta 2: ${puntaje2} puntos</p>${obtenerErroresDePregunta(2)}`;

						evaluarPregunta3();
						const puntaje3 = obtenerPuntajeDePregunta(3);
						puntuaciones.push(puntaje3);
						totalErrores += `<p>Pregunta 3: ${puntaje3} puntos</p>${obtenerErroresDePregunta(3)}`;

						evaluarPregunta4();
						const puntaje4 = obtenerPuntajeDePregunta(4);
						puntuaciones.push(puntaje4);
						totalErrores += `<p>Pregunta 4: ${puntaje4} puntos</p>${obtenerErroresDePregunta(4)}`;

						evaluarPregunta5();
						const puntaje5 = obtenerPuntajeDePregunta(5);
						puntuaciones.push(puntaje5);
						totalErrores += `<p>Pregunta 5: ${puntaje5} puntos</p>${obtenerErroresDePregunta(5)}`;

						const sumaPuntajes = puntuaciones.reduce((a, b) => a + b, 0);
						let puntuacionFinal = 2;

						if (sumaPuntajes >= 23) {
							puntuacionFinal = 5;
						} else if (sumaPuntajes >= 18) {
							puntuacionFinal = 4;
						} else if (puntuaciones.filter(p => p === 3).length <= 2 && sumaPuntajes >= 14) {
							puntuacionFinal = 3;
						}

						// Actualizar solo el contenido dinámico sin eliminar el botón
						const resultadoFinal = document.getElementById("final-score");
						const dynamicContent = `
        <p>Puntuación Final: ${puntuacionFinal} puntos</p>
        <p>Detalles de las preguntas:</p>${totalErrores}
    `;
						resultadoFinal.querySelector(".dynamic-content").innerHTML = dynamicContent;
					}



				function obtenerPuntajeDePregunta(numero) {
					const resultado = document.getElementById("result");
					const regex = new RegExp(`Puntaje de la Pregunta ${numero}: (\\d+) puntos`);
					const match = resultado.innerHTML.match(regex);
					return match ? parseInt(match[1]) : 0;
				}

				function obtenerErroresDePregunta(numero) {
					const resultado = document.getElementById("result");
					const regex = new RegExp(`Puntaje de la Pregunta ${numero}:(.*?)<p>Errores:</p><ul>(.*?)</ul>`, 's');
					const match = resultado.innerHTML.match(regex);
					return match ? `</p><ul>${match[2]}</ul>` : "";
				}
			</script>


</script>


</body>

</html>